<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>FetalSynthGen GitHub - FetalSynthGen</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "FetalSynthGen GitHub";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".">
          <img src="media/fetsynthgen_logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">FetalSynthGen GitHub</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#from-source">From Source</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#acknowledgements">Acknowledgements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#references">References</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="usage/">How to use the generator?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/">Examples</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="seed_generation/">Seed Generation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="configs/">Configs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="datasets/">Datasets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="generation/">Generation</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">FetalSynthGen</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Home</li>
      <li class="breadcrumb-item active">FetalSynthGen GitHub</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="fetalsynthgen">FetalSynthGen <a href="https://github.com/Medical-Image-Analysis-Laboratory/fetalsyngen"><img alt="GitHub" src="https://img.shields.io/badge/GitHub-Project-blue?logo=github" /></a></h1>
<h2 id="introduction">Introduction</h2>
<p>FetalSynthGen is a <strong>synthetic data generator</strong> created to address the challenges of limited data and domain shifts in fetal brain MRI analysis. It is based on the <strong>domain randomization</strong> approach of SynthSeg [1], which uses anatomical segmentations to create diverse synthetic images.</p>
<p>It's application for fetal brain tissue segmentation is described in [2, 3].</p>
<p>Below is a brief overview of the key components of the FetalSynthGen pipeline:
<img alt="FetalSynthGen Pipeline" src="media/fetSynthGen.png" /></p>
<ul>
<li>
<p><strong>Input:</strong> The generator begins with a dataset of segmentation maps, which serve as anatomical priors of the simulated fetal brain.</p>
</li>
<li>
<p><strong>Meta-Labels:</strong> Instead of directly using the original segmentation labels, the method first merges these labels into four <strong>meta-classes</strong>: white matter (WM), gray matter (GM), cerebrospinal fluid (CSF), and non-brain tissue (including skull and surrounding maternal tissue).</p>
</li>
<li>
<p><strong>Intensity Clustering:</strong> Within each meta-class, the generator uses the Expectation-Maximization (EM) algorithm for intensity clustering, which divides each meta-class into <strong>subclasses</strong>, capturing the heterogeneity of the simulated brain tissues. The number of subclasses is sampled from a random uniform distribution.</p>
</li>
<li><strong>Intensity Generation:</strong> For each subclass, the generator then samples intensities from a <strong>Gaussian Mixture Model (GMM)</strong> with randomized parameters. This method creates images with varied contrasts that although often exceed what is realistic, ensure that the model learns features robust to  domain shifts related to intensity or contrast.</li>
<li><strong>Spatial Transformations:</strong> After generating intensities, the synthetic images undergo spatial transformations, including affine and non-rigid diffeomorphic deformations. These simulate variations in image resolution and partial volume effects.</li>
<li><strong>Artifact Simulation</strong>: The generator corrupts the images by adding a bias field, performing intensity transformations, and simulating various image resolutions.</li>
</ul>
<!-- The use of **meta-labels** and **subclasses** prevents artificial boundaries from aligning with the segmentation boundaries in the synthetic images.The goal of FetalSynthGen is to produce highly varied and diverse synthetic images, covering the range of variations that would be encountered across different real-world domains. -->

<p>The output of the generator is a paired set of <strong>synthetic images</strong> and corresponding <strong>synthetic segmentations</strong> that can be used to train a segmentation model, super-resolution or brain-embedding model.</p>
<h2 id="installation">Installation</h2>
<h3 id="from-source">From Source</h3>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Medical-Image-Analysis-Laboratory/fetalsyngen
<span class="nb">cd</span><span class="w"> </span>fetalsyngen
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</code></pre></div>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>This research was funded by the Swiss National Science Foundation (182602 and 215641), ERA-NET Neuron MULTI-FACT project (SNSF 31NE30 203977). We acknowledge the Leenaards and Jeantet Foundations as well as CIBM Center for Biomedical Imaging, a Swiss research center of excellence founded and supported by CHUV, UNIL, EPFL, UNIGE and HUG.</p>
<h2 id="references">References</h2>
<ol>
<li>Billot, Benjamin, et al. “SynthSeg: Segmentation of Brain MRI Scans of Any Contrast and Resolution without Retraining.” Medical Image Analysis, vol. 86, 25 Feb. 2023, pp. 102789–102789, www.sciencedirect.com/science/article/pii/S1361841523000506, https://doi.org/10.1016/j.media.2023.102789.</li>
<li>Vladyslav Zalevskyi, et al. “Improving Cross-Domain Brain Tissue Segmentation in Fetal MRI with Synthetic Data.” Lecture Notes in Computer Science, 1 Jan. 2024, pp. 437–447, link.springer.com/chapter/10.1007/978-3-031-72378-0_41, https://doi.org/10.1007/978-3-031-72378-0_41. </li>
<li>Vladyslav Zalevskyi, et al. “Maximizing Domain Generalization in Fetal Brain Tissue Segmentation: The Role of Synthetic Data Generation, Intensity Clustering and Real Image Fine-Tuning.” ArXiv.org, 2024, arxiv.org/abs/2411.06842.</li>
</ol>
<p>‌
‌</p>
<p>‌</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="usage/" class="btn btn-neutral float-right" title="How to use the generator?">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="usage/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
